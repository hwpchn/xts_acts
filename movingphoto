import photoAccessHelper from '@ohos.file.photoAccessHelper';

// 主函数：测试 BOUNCE_PLAY 属性
async function testBouncePlay() {
  // 第1步：创建一个空的照片管理器
  let phAccessHelper = photoAccessHelper.getPhotoAccessHelper();

  // 第2步：从图库随便拿一张照片
  let fetchOptions = {
    fetchColumns: [], // 空的表示拿所有信息
    predicates: new dataSharePredicates.DataSharePredicates() // 空的条件，拿第一张就好
  };
  let fetchResult = await phAccessHelper.getAssets(fetchOptions); // 获取照片列表
  let photoAsset = await fetchResult.getFirstObject(); // 拿第一张照片

  // 第3步：准备一个改照片的工具
  let changeRequest = new photoAccessHelper.MediaAssetChangeRequest(photoAsset);

  // 第4步：把效果模式设成 BOUNCE_PLAY
  changeRequest.setEffectMode(photoAccessHelper.MovingPhotoEffectMode.BOUNCE_PLAY);

  // 第5步：告诉系统保存这个改动
  await phAccessHelper.applyChanges(changeRequest);

  // 第6步：打印一条消息，表示成功
  console.info('BOUNCE_PLAY 设置成功啦！');
}

// 运行这个测试
testBouncePlay();
